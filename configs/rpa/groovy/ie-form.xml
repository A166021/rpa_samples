<?xml version="1.0" encoding="UTF-8"?>
<config xmlns="http://web-harvest.sourceforge.net/schema/1.0/config" scriptlang="groovy">
    <selenium-flow>
		<!-- Internet explorer driver -->
        <selenium name="seleniumDriver" browser="internet explorer" close-on-completion="true" start-in-private="true">
              <script><![CDATA[
 				// import timeUnit library for setup timeouts
            	import java.util.concurrent.TimeUnit;
       			// get web browser and setup 
                ieDriver = seleniumDriver.getWrappedObject();
                ieDriver.manage().timeouts().implicitlyWait(1, TimeUnit.MINUTES).pageLoadTimeout(1, TimeUnit.MINUTES);
               	// get web page
                ieDriver.get("https://citi-poc.s3.amazonaws.com/webid-portal/login.html");
				// set user
				user		= ieDriver.findElement(By.name("username"));
				user.click();
				user.sendKeys("Mr. Abraham Lincoln");
				// set  password
				password	= ieDriver.findElement(By.name("password"));
				password.click();
                password.sendKeys("hir password!23442342[]sd");
				// click "Submit query"
                ieDriver.findElement(By.cssSelector("input[type='submit']")).click();
				// click link "Get report"
                ieDriver.findElement(By.linkText("Get report")).click();
                // wait for view
                TimeUnit.SECONDS.sleep(10);
				// set current url to sys var
				sys.defineVariable("current_url", ieDriver.getCurrentUrl());
            ]]></script>
        </selenium>
    </selenium-flow>
	<!-- Export values to the output CSV file -->
    <export include-original-data="false">
		<single-column name="current_url">
		    <template>${current_url.toString()}</template>
		</single-column>
    </export>
</config>